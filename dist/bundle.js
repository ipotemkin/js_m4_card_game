(()=>{var t={990:t=>{t.exports={cards:[{pk:11,name:"ace",suit:"spades",img:"туз пики.svg"},{pk:12,name:"king",suit:"spades",img:"король пики.svg"},{pk:13,name:"queen",suit:"spades",img:"дама пики.svg"},{pk:14,name:"jack",suit:"spades",img:"валет пики.svg"},{pk:15,name:"10",suit:"spades",img:"10 пики.svg"},{pk:16,name:"9",suit:"spades",img:"9 пики.svg"},{pk:17,name:"8",suit:"spades",img:"8 пики.svg"},{pk:18,name:"7",suit:"spades",img:"7 пики.svg"},{pk:19,name:"6",suit:"spades",img:"6 пики.svg"},{pk:21,name:"ace",suit:"hearts",img:"туз черви.svg"},{pk:22,name:"king",suit:"hearts",img:"король черви.svg"},{pk:23,name:"queen",suit:"hearts",img:"дама черви.svg"},{pk:24,name:"jack",suit:"hearts",img:"валет черви.svg"},{pk:25,name:"10",suit:"hearts",img:"10 черви.svg"},{pk:26,name:"9",suit:"hearts",img:"9 черви.svg"},{pk:27,name:"8",suit:"hearts",img:"8 черви.svg"},{pk:28,name:"7",suit:"hearts",img:"7 черви.svg"},{pk:29,name:"6",suit:"hearts",img:"6 черви.svg"},{pk:31,name:"ace",suit:"diamonds",img:"туз бубны.svg"},{pk:32,name:"king",suit:"diamonds",img:"король бубны.svg"},{pk:33,name:"queen",suit:"diamonds",img:"дама бубны.svg"},{pk:34,name:"jack",suit:"diamonds",img:"валет бубны.svg"},{pk:35,name:"10",suit:"diamonds",img:"10 бубны.svg"},{pk:36,name:"9",suit:"diamonds",img:"9 бубны.svg"},{pk:37,name:"8",suit:"diamonds",img:"8 бубны.svg"},{pk:38,name:"7",suit:"diamonds",img:"7 бубны.svg"},{pk:39,name:"6",suit:"diamonds",img:"6 бубны.svg"},{pk:41,name:"ace",suit:"clubs",img:"туз крести.svg"},{pk:42,name:"king",suit:"clubs",img:"король крести.svg"},{pk:43,name:"queen",suit:"clubs",img:"дама крести.svg"},{pk:44,name:"jack",suit:"clubs",img:"валет крести.svg"},{pk:45,name:"10",suit:"clubs",img:"10 крести.svg"},{pk:46,name:"9",suit:"clubs",img:"9 крести.svg"},{pk:47,name:"8",suit:"clubs",img:"8 крести.svg"},{pk:48,name:"7",suit:"clubs",img:"7 крести.svg"},{pk:49,name:"6",suit:"clubs",img:"6 крести.svg"}]}}},e={};function n(a){var s=e[a];if(void 0!==s)return s.exports;var o=e[a]={exports:{}};return t[a](o,o.exports,n),o.exports}(()=>{"use strict";function t(e){if(null==e||!1===e)return document.createTextNode("");if("string"==typeof e||"number"==typeof e||!0===e)return document.createTextNode(e);if(Array.isArray(e)){const n=document.createDocumentFragment();return e.forEach((e=>{n.appendChild(t(e))})),n}const n=document.createElement(e.tag);return e.cls&&[].concat(e.cls).forEach((t=>n.classList.add(t))),e.attrs&&Object.keys(e.attrs).forEach((t=>n.setAttribute(t,e.attrs[t]))),n.appendChild(t(e.content)),n}var e=n(990);function a(t){const n=function(t,e=36){let n=0;const a=[];do{const t=Math.floor(Math.random()*e);a.includes(t)||(a.push(t),n++)}while(n<t);return a}(t/2);let a=[];for(let t of n)a.push(e.cards[t]),a.push(e.cards[t]);return s(s(a))}function s(t){return t.map((t=>({value:t,sort:Math.random()}))).sort(((t,e)=>t.sort-e.sort)).map((({value:t})=>t))}function o(t){d(t),window.app.prevOpenCard&&d(window.app.prevOpenCard)}function r(t){return window.app.prevOpenCard?.dataset.cardPk===t.dataset.cardPk}function i(t){const e=t.querySelector(".card__face"),n=t.querySelector(".card__back");e?.classList.contains("hidden")?(n?.classList.add("hidden"),e.classList.remove("hidden"),t.dataset.open="true",window.app.openCardsCount++):(e?.classList.add("hidden"),n?.classList.remove("hidden"),t.dataset.open="false",window.app.openCardsCount--)}function c(t){"true"!==t.dataset.open&&i(t)}function d(t){"true"===t.dataset.open&&i(t)}function l(){const t=document.querySelectorAll(".card"),e=document.querySelectorAll(".card__face"),n=document.querySelectorAll(".card__back");t.forEach((t=>t.dataset.open="false")),e.forEach((t=>t.classList.add("hidden"))),n.forEach((t=>t.classList.remove("hidden")))}function u(){window.app.timerValue=0,window.app.openCardsCount=0,window.app.errorCount=0,f()}function m(){clearInterval(window.app.timer),window.app.timer=void 0}function p(){!function(t){const e=document.querySelector(".clock__time");e&&(e.textContent=function(t){const e=t%60;return`${g(Math.min((t-e)/60,60))}.${g(e)}`}(t))}(++window.app.timerValue)}function g(t){let e=String(t);return e.length<2&&(e="0"+e),e}function v(e,n=!0){const{root:a}=window.app;n&&(a.textContent="");const s=t(e);return a.appendChild(s),s}function f(){const e=v({tag:"div",cls:"canvas",content:[{tag:"form",cls:"form",attrs:{name:"form"},content:[{tag:"h1",cls:"form__title",content:"Выбери сложность"},{tag:"div",cls:["field","form__level-area"],content:[{tag:"input",attrs:{type:"radio",id:"level-1",name:"level",value:"1"}},{tag:"label",attrs:{for:"level-1"},content:"1"},{tag:"input",attrs:{type:"radio",id:"level-2",name:"level",value:"2"}},{tag:"label",attrs:{for:"level-2"},content:"2"},{tag:"input",attrs:{type:"radio",id:"level-3",name:"level",value:"3"}},{tag:"label",attrs:{for:"level-3"},content:"3"}]},{tag:"button",cls:"form__submit-btn",attrs:{type:"submit"},content:"Старт"},{tag:"p",cls:["form__error","hidden"],content:"Выберите уровень"}]}]}),n=e.querySelector(".form"),s=e.querySelector(".form__error"),i=e.querySelector(".form__submit-btn"),d=()=>s.classList.add("hidden");n.addEventListener("click",d),i.addEventListener("blur",d),n.addEventListener("submit",(e=>{if(e.preventDefault(),!(window.app.level=+n.level.value))return void s.classList.remove("hidden");let i;switch(window.app.level){case 1:i=6;break;case 2:i=12;break;default:i=18}window.app.maxCards=i,function(){const e=v(function(){const{errorIcon:t}=window.app;return{tag:"div",cls:"container",content:[{tag:"div",cls:"top",content:[{tag:"div",cls:"clock",content:[{tag:"div",cls:"clock__labels",content:[{tag:"span",content:"min"},{tag:"span",cls:"clock__labels__sec",content:"sec"}]},{tag:"p",cls:"clock__time",content:"00.00"}]},{tag:"div",content:[{tag:"img",cls:["top__error","hidden"],attrs:{src:t}},{tag:"img",cls:["top__error","hidden"],attrs:{src:t}},{tag:"img",cls:["top__error","hidden"],attrs:{src:t}}]},{tag:"button",cls:"restart-btn",content:"Начать заново"}]},{tag:"div",cls:"card-board"}]}}()),n=e.querySelector(".card-board"),s=e.querySelector(".restart-btn"),i=e.querySelector(".clock__time");s.addEventListener("click",(()=>{m(),u()})),i.textContent="00.00";const{maxCards:d}=window.app,g=a(d);for(let e=0;e<d;e++){const a=n.appendChild(t({tag:"div",cls:"card",content:[{tag:"div",cls:"card__face",attrs:{style:`background: url('${"./static/"+g[e].img}') no-repeat center;`}},{tag:"div",cls:["card__back","hidden"]}]}));a.dataset.cardPk=g[e].pk,a.addEventListener("click",(()=>{"true"!==a.dataset.open&&void 0!==a.dataset.open&&(c(a),window.app.openCardsCount%2>0?window.app.prevOpenCard=a:r(a)?window.app.openCardsCount===window.app.maxCards&&(m(),k("Вы выиграли!",window.app.winIcon)):(w(++window.app.errorCount),window.app.errorCount>=3?(m(),k("Вы проиграли!",window.app.loseIcon)):setTimeout((()=>{o(a)}),500)))}))}setTimeout(l,5e3),window.app.timer=setInterval(p,1e3)}()}))}function k(t,e){const n=document.querySelector(".clock__time"),a=v(function(t,e,n=null){return{tag:"div",cls:"form-msgbox-canvas",content:{tag:"div",cls:"form-msgbox",content:[{tag:"img",cls:"form-msgbox__icon",attrs:{src:`${n}`}},{tag:"div",cls:"form-msgbox__title",content:t},{tag:"p",cls:"form-msgbox__time-label",content:"Затраченное время:"},{tag:"p",cls:"form-msgbox__time",content:e},{tag:"button",cls:"form-msgbox__submit-btn",attrs:{type:"submit"},content:"Играть снова"}]}}}(t,n?n.textContent:"",e),!1);a.querySelector(".form-msgbox__submit-btn").addEventListener("click",(()=>u()))}function w(t){const e=document.querySelectorAll(".top__error");for(let n=0;n<t;n++)e[n].classList.remove("hidden")}window.app={root:document.querySelector(".app"),level:void 0,cards:e.cards,maxCards:6,prevOpenCard:void 0,openCardsCount:0,timer:void 0,timerValue:0,errorCount:0,loseIcon:"./static/lose.svg",winIcon:"./static/win.svg",errorIcon:"./static/error-icon.png"},f()})()})();